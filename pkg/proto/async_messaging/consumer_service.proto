syntax = "proto3";

package accelbyte.extend.async_messaging;
// Version v1.0.0

import "google/protobuf/empty.proto";
import "google/protobuf/descriptor.proto";

option csharp_namespace = "AccelByte.Extend.AsyncMessaging";
option go_package = "accelbyte.net/extend/asyncMessaging";
option java_multiple_files = true;
option java_package = "net.accelbyte.extend.asyncMessaging";

// Define custom string option for RPC methods
extend google.protobuf.MethodOptions {
  string topics_subscription = 50001;
}

message ReceivedMessage {
  string body = 1;
  string topic = 2;

  // SentTimestamp and possibly TraceId
  map<string, string> metadata = 3;
}

service AsyncMessagingConsumerService {
  rpc onMessage(ReceivedMessage) returns (google.protobuf.Empty) {
    option (topics_subscription) = "PlayerKilled, PlayerSaved, PlayerJoined"; // list of Async Messaging topics to subscribe from
  };
}
